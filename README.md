# Honeynet in Azure

![](https://imgur.com/18TSMJA.gif)

## Abstract

Through the creation of this lab on Microsoft Azure, we could reflect and prepare us for the type of controls needed in a real world capacity.  From setting the correct network security group, changing the inbound rules and lastly using KQL to help pull the necessary metrics needed to demonstrate this activity.  When the resources we are protecting would cause a burden to countries or company financially of any type of  downtime to our day-to-day operations.   The lack of development in security is our biggest insecurity as we review examples of ongoing fight with encryption and cryptography on a multitude of levels. 

Below is the legend with all thing involved in creating this HoneyNet on Microsoft Azure and an animation explaining the process in delegating logs into Microsoft Sentinel

![Legend](https://github.com/weshzu/honeypot/blob/main/Legend.png)

![](https://github.com/weshzu/honeypot/blob/main/uvAbdzZ.gif?raw=true)

Discussing the topics of controls and regulation for operational, technical and management standards that reflect on the confidentiality, integrity and availability is an interesting topic to analyze.  When one of these three principals are being challenged and questioned because of the lack of password controls against external threats, the slow adaption of strong cryptography and the greed of corporate and or country's monetization.  Encryption technology exists with soft power in geopolitical chess and arms race like building a nuclear warhead.  Decrypting and encrypting classified information to use in the natural non-frontal cold war between multiple nations.  The nation with the most resourceful technological sounding insurgency would be at the top of this never ending digital cyber warfare between countries.  The 24 hour network security group hardening showcases the need for other global superpower to make the adjustments and focus with the ongoing threats 

DigiNortar is a company that is built on fundamental trust in the authorized certification.  It failed to comply and quickly address the breach until it is spiraled out of control.  As a result, the company was taken over by the Dutch government and dissolved of its existence.  This is a prime example of dismantling and injecting internal conflict from the use of highly trained military advances from an outside country.  The attack on integrity damaged the very fundamental reason behind a certified authority which is considered a publicly trusted digital entity for the likes of companies such as, Google, IBM, AWS and more.  Imagine being granted in the round table of digital leaders and or councils and slowly revealed that one of them has been compromised unknowingly to the rest and acting in the fake pretense of obtaining large volumes of data from Gmail to extract data on their own citizens with political gain.  The falsely created certificates were used to support a vector attack of Iranian citizens and disclosed roughly 300,000 users of their PII information, also known as personally identified information. 

In my findings in creating a virtual machine on Azure, there were multiple successful windows brute force attacks found in my incident reports which includes IP address, company and place of origin. 

 | Origin (Iran)            | Incident ID   | IP Address       | Type of attack       | Organization                                               |
| ------------------------ | ------------- | -----------------|----------------------|------------------------------------------------------------|
| Damghan                  | 73            | 185.39.183.2     | Brute Force Success  | Shabakeh Gostar Dorna Cooperative Co.                      |
| Khomeyn                  | 67            | 185.26.232.206   | Brute Force Success  | Imam Khomeini Port Authority-port & Maritime Organization  |
| Tehran                   | 57            | 185.129.202.218  | Brute Force Success  | Pte Dsl Network                                            |
| Khomeyn                  | 52            | 185.106.144.52   | Brute Force Success  | Royal Internet                                             |


In this lab research and article, my finding solidifies the highly trained talents as we explore the public windows virtual machines.  Password decrypting technology growth is stunned by the interest of nation state that is enforced and operated in Iran.  Iran has restrictions on the use of its own encryption technologies.  In the expense of other nations, it spares no shortcuts in attacking networks or virtual machines in my findings.  Iran has mandated that all encrypted communications used within the country and must be compliant with the ministry of information and communication technology.  Also, government bodies are entitled to monitor and control any form of encrypted communication within its borders.  Hence, the validity of hacking communication applications that are encrypted from the prying eyes of political patriots and activists within Gmail and or more.  Is there a purpose to continue advancing with password encrypted management technologies when actions are taking place with intervention and confiscation of failing to comply with the regulators?  Using password management solutions such as, Keeper, Last pass, Keypass and Password state is another tool used for multinational breach to the trust and stronghold of these security vaults.  This is an example of having an open notepad waiting for a bad state actor to use it to their advantage for causing another global catastrophic damage in SPII or sensitive personally identified information data to be leaked.  This can lead to unauthorized access, data breaches, identity theft, or any other compromises which strikes the confidentiality of applications that are used to keep us from being exposed in the public internet.  When it comes to the security overview of the global encryption, there will always be questions on what is the correct amount of encryption allowance under the judicial laws of minister of communication and technology like the ones in Iran.  What is minimum and maximum bits of encryption allowed in a corporate or state-run setting?   Is there a best practice when it comes to password encryption or is it normally catered towards only the best interest that benefits the country of where it is operated?  There is a global risk when limiting or weakening number of bit encryption for abiding the concerns of law enforcements and political officials.  Similarly, it would result in an Iranian-like environment which would attack the fundamental core of CIA riddled with hacktivist or considerably a tainted or clear white hat depending on the government body it is working under.  Behrroz Kamalian also known as father of hacking in Iran.  Harold as a celebrity for his accomplishments within the borders of Iran.  In truth, globally he is also under the investigation of his involvement in assisting with protest happening in the 2009 Iranian presidential elections.  He was immediately sanctioned and banned from entering any European states as well as asset freezes. (Wiki, need more scholarly article).  Mr. Kamaillian is allowed to continue conducting business within his national waters and territory for his publicly revealed repercussions The NIST 800-52 sets up the pragmatic framework for controls which includes audits, accountability policy procedures, guidelines, regulations and policies and organizational risk tolerance is used to get a gage of the responsibilities of a company 

According to the CIS controls for cyber hygiene,  (90) password characters should start from minimum of 14 characters.  1.2 million unprotected devices with default or non-existing passwords according to the internet census 2012 when a researched by the name Carna did a worldwide port scan of all the existing IPv4s in the world. And the total number would even be higher fast forward to present time.  Presently, the introduction of IPv6 and more IoT devices to help monitor and assist us with our everyday task are at risk.  Also, the Acer router that was heavily exposed in the public network that could be accessed from anywhere in the world.  It feels as if the companies care more about the volumes and product sold than the vulnerability of their router.  In other words, the company would only take immediate actions when the integrity and confidentiality or image is at stake.  When Kyle Lovett reported to the Asus representative, their only response was “We’ll look into it”.  Multinational companies run the same as a government entity and could be reflective on a micro scale of what impact it has on customers or citizens of the world.  As geopolitical interference increases, it would also intercept and capitalize on the success of any new advancements in cryptography.   

## Attack Maps Before Hardening / After Hardening Security Controls 

![](https://imgur.com/r0FakBf.gif) ![](https://imgur.com/48HmREZ.gif) ![](https://imgur.com/cw7kW1l.gif)

![](https://imgur.com/kzulV6b.gif)

It may be concluded that the research gathered provides the necessary evidence to showcase Iran grappling with power and maintaining full iron grip controls on its citizen outside the border without having to step foot in another country like DigiNotar and HoneyNet environment.  There will always be a great debate and discussion in what the perfect concoction needed to be enforced for individual or politically motivated entities.  There will always be a power struggle when it comes to the international intervention unless it benefits the parties involved politically or financially.  The thought of placing user’s protection as a primary objective is highly unfavorable.  As we integrate further and interweave our digital path, we must take sole hygienic responsibilities such as, implementing multifactor authenticator, network security groups, inbound port rules and regular password changes.  And after those adjustments could we see massive changes in our HoneyNet statics and incident reports. 

| Metric                   | Before | After
| ------------------------ | -----  | -----
| SecurityEvent            | 66010  |  6077
| SecurityAlert            | 2      |  0
| SecurityIncident         | 300    |  0
| AzureNetworkAnalytics_CL | 1554   |  0

## Azure Resources Deployed, Technologies, Regulations and Articles used: 

- [Azure Virtual Network](https://learn.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview) (VNet) 

- [Azure Network Security Group](https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview) (NSG) 
- [Virtual Machines](https://learn.microsoft.com/en-us/azure/virtual-machines/overview) (2x Windows 10 Pro, 1x Linux Server) 
- [Log Analytics Workspace](https://learn.microsoft.com/en-us/azure/azure-monitor/logs/log-analytics-workspace-overview) with Kusto Query Language (KQL) Queries 
- [Azure Key Vault](https://learn.microsoft.com/en-us/azure/key-vault/general/basic-concepts) for Secure Secrets Management 
- [Azure Storage Account](https://learn.microsoft.com/en-us/azure/storage/common/storage-account-overview) for Data Storage 
- [Microsoft Sentinel](https://learn.microsoft.com/en-us/azure/sentinel/overview) for Security Information and Event Management (SIEM) 
- [Microsoft Defender](https://learn.microsoft.com/en-us/azure/defender-for-cloud/defender-for-cloud-introduction) for Cloud to Protect Cloud Resources 
- [Windows Remote Desktop](https://support.microsoft.com/en-us/windows/how-to-use-remote-desktop-5fe128d5-8fb1-7a23-3b8a-41e636865e8c) for Remote Access 
- [Command Line Interface](https://www.w3schools.com/whatis/whatis_cli.asp) (CLI) for System Management 
- [PowerShell](https://learn.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.3) for Automation and Configuration Management 
- [NIST SP 800-53](https://csrc.nist.gov/publications/detail/sp/800-53/rev-5/final) for Security Controls 
- [NIST SP 800-61](https://www.nist.gov/privacy-framework/nist-sp-800-61) for Incident Handling Guidance
- [DigiNotar](https://spectrum.ieee.org/diginotar-certificate-authority-breach-crashes-egovernment-in-the-netherlands)  CA Breach
- [Asus](https://www.cnet.com/news/privacy/asus-router-vulnerabilities-go-unfixed-despite-reports/) Router Vulnerabilities
- [Carna Botnet](https://www.brookings.edu/articles/how-big-is-the-internet-of-things-and-how-big-will-it-get/) IoT
- [Econmics Behaviour](https://www.digitaljournal.com/entertainment/netflix-password-sharing-and-the-power-of-behavioural-economics/article) Netflix




